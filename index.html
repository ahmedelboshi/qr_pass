<!DOCTYPE html>
<html data-wf-domain="password-manager-5c44bd.webflow.io" data-wf-page="665dd02a001bc1caff2d6e99"
    data-wf-site="665da9e8520d2e8cacf37202"
    class="w-mod-js wf-poppins-n6-active wf-poppins-n2-active wf-poppins-i6-active wf-poppins-n9-active wf-poppins-n4-active wf-opensans-n7-active wf-opensans-n8-active wf-opensans-n4-active wf-opensans-n6-active wf-opensans-n3-active wf-poppins-i2-active wf-poppins-i4-active wf-opensans-i8-active wf-opensans-i7-active wf-opensans-i6-active wf-opensans-i3-active wf-opensans-i4-active wf-active">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>
        .wf-force-outline-none[tabindex="-1"]:focus {
            outline: none;
        }
    </style>
    <title>qr password</title>
    <meta content="tool" property="og:title">
    <meta content="tool" property="twitter:title">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="./password_qr_files/password-manager-5c44bd.webflow.bc49d8b4a.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/" rel="preconnect">
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin="anonymous">
    <script src="./password_qr_files/webfont.js" type="text/javascript"></script>
    <link rel="stylesheet" href="./password_qr_files/css" media="all">
    <script
        type="text/javascript">WebFont.load({ google: { families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic", "Poppins:200,200italic,regular,italic,600,600italic,900:latin,latin-ext"] } });</script>
    <script
        type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
    <link href="https://cdn.prod.website-files.com/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="https://cdn.prod.website-files.com/img/webclip.png" rel="apple-touch-icon">
    <link href="./tail/styles.css" rel="stylesheet">

</head>

<body class="body-2 px-5 md:px-20" x-data="ui()">
    <div class="w-layout-vflex flex-block-5">
        <h1 class=" mt-5 text-5xl text-center ">Private Pass QR</h1>
    </div>
    <div class="w-layout-vflex ">
        <h1 class="w-full text-center p-0 text-2xl mb-5">Your Privacy, Your Control</h1>
        <h2 class="w-full text-center p-0 tex-lg">save all your passwords inside encrypted qr code</h2>
        <h1 class="w-full text-center p-0 text-md">first qr password manager in the world</h1>

        <div class="w-layout-vflex flex-block-4">
            <button @click="()=>decodeMode=true" class="px-4 py-2 bg-white border-solid border-2 border-white text-black hover:opacity-80">READ QR</button>
            <button @click="()=>decodeMode=false" class="px-4 py-2 border-solid border-2 border-white hover:opacity-80">GENERATE QR</button>
        </div>
    </div>
    <section class="tool-container ">
        <section x-show="!decodeMode" class="flex flex-col gap-10  lg:flex-row" x-data="passwordManager()">
            <div class="w-layout-vflex qr-gen-input">
                <div class="w-layout-hflex flex-block-8">
                    <div class="text-block">passwords or data</div><button @click="addInputGroup"
                        class="text-[20px] mb-2">+</button>
                </div>
                <div class="w-layout-vflex left-side">
                    <div class="form-block w-form">
                        <div id="passwordForm" class="form">
                            <div id="inputGroups" class="w-layout-vflex passwords-section ">
                                <template x-for="(inputGroup, index) in inputGroups" :key="index">
                                    <div class="input-group">
                                        <div class="w-full flex justify-between">

                                            <label for="name" class="field-label my-auto">Title</label>
                                            <button @click="()=>inputGroups.pop(index)" class="text-4xl mb-2">-</button>
                                        </div>
                                        <input autocomplete="off" class="name w-input" maxlength="256" name="name"
                                            data-name="Name"
                                            placeholder="Enter data title could be anything like my server password"
                                            type="text" x-model="inputGroup.name" required>
                                        <label for="field-3" class="password-label">Password Or Data</label>
                                        <textarea required placeholder="Password Or data you want to encrypt "
                                            maxlength="5000" name="field-2" data-name="Field 2"
                                            class="passwords w-input" x-model="inputGroup.passwords"
                                            @input="updateStrengthMeter($event, index)"></textarea>
                                        <div class="strength-text" x-text="getStrengthText(strengths[index])"></div>
                                        <div class="flex flex-row justify-between">
                                            <div class="h-2 w-[24.5%]"
                                                :style="{borderBottom: strengths[index] >= 1 ? '2px solid white' : '2px solid transparent'}">
                                            </div>
                                            <div class="h-2 w-[24.5%]"
                                                :style="{borderBottom: strengths[index] >= 2 ? '2px solid white' : '2px solid transparent'}">
                                            </div>
                                            <div class="h-2 w-[24.5%]"
                                                :style="{borderBottom: strengths[index] >= 3 ? '2px solid white' : '2px solid transparent'}">
                                            </div>
                                            <div class="h-2 w-[24.5%]"
                                                :style="{borderBottom: strengths[index] >= 4 ? '2px solid white' : '2px solid transparent'}">
                                            </div>
                                        </div>
                                        <button @click.prevent="generatePassword(index)"
                                            class="border-btn generate-password w-button">GENERATE PASSWORD</button>
                                    </div>
                                </template>
                            </div>
                            <div class="w-layout-vflex master-password-section">
                                <label for="mainPassword" class="field-label">MASTER PASSWORD</label>
                                <input autocomplete="off" class="w-input" maxlength="256" name="mainPassword"
                                    placeholder="Select complex data as master passwords" type="text"
                                    x-model="mainPassword" required>
                                <button @click="generateQRCodes" class="border-btn gen-qr w-button">GENERATE QR</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div id="qrcode" class="mb-[-20px]" x-ref="qrcode"></div>
                <div class="progress" x-show="isGenerating">
                    <div>Generating QR Code...</div>
                </div>
                <!-- <input type="file" id="qrInput" @change="decodeQRCode"><br><br>
                <div type="file"><button @click="decodeQRCode" class="btn w-button">Decode QR Code</button></div>
                <div id="decryptedData" x-text="decryptedData"></div> -->
            </div>
        </section>
        <section x-show="decodeMode" class="w-layout-v flex flex-col" x-data="passwordManager()">
            <div class="min-h-[60vh] w-full flex flex-row items-center justify-center gap-10">
                <div class="font-normal flex  flex-col items-center mt-8">
                    <button @click="()=>$refs.qrFile.click()"
                        class="px-4 py-4 flex flex-col gap-16 w-full items-center  font-normal text-xl">
                        <svg class="scale-[2] ml-3" xmlns="http://www.w3.org/2000/svg" width="85" height="85"
                            viewBox="0 0 85 85" fill="none">
                            <path
                                d="M8.9 54.7H16.9V62.7H8.9V54.7ZM0.900002 46.7H24.9V70.7H0.900002V46.7ZM4.9 66.7H20.9V50.7H4.9V66.7ZM62.9 8.7H54.9V16.7H62.9V8.7ZM70.9 24.7H46.9V0.700001H70.9V24.7ZM66.9 4.7H50.9V20.7H66.9V4.7ZM16.9 8.7H8.9V16.7H16.9V8.7ZM24.9 24.7H0.900002V0.700001H24.9V24.7ZM20.9 4.7H4.9V20.7H20.9V4.7ZM22.9 27.3H1.4V44H4.4V30.3H22.9V27.3ZM10.2 42.9V34.8H5.4V37.8H7.2V42.9H10.2ZM14.4 34.1H27.3V31.1H11.4V43.9H14.4V34.1ZM35.4 34.1H40.7V31.1H35.4V18.4H32.4V22.7H28.4V25.7H32.4V42.4H21.6V39.2H18.6V45.4H35.4V34.1ZM29.9 8.9H37.1V4.2H42.1V19.3H45.1V1.2H28.4V4.2H34.1V5.9H26.9V15.7H29.9V8.9ZM31.2 12.6H37.5V25.4H40.5V9.6H31.2V12.6ZM45.1 22.7H42.1V27.3H38.9V30.3H45.1V22.7ZM18 37.9H23.9V39.9H26.9V34.9H15V44H18V37.9ZM30.2 27.3H25.2V30.3H30.2V27.3ZM29.9 17.4H26.9V20.7H29.9V17.4ZM35 17.2V14.2H32V17.2H35ZM27.9 32.6V41.7H30.9V32.6H27.9ZM6.5 31.1V34.1H9.9V31.1H6.5ZM42.1 67.2H29.9V47.9H26.9V70.3H45.1V61.2H42.1V67.2ZM41 54.2H32V65.1H35V57.2H38V63.3H41V54.2ZM36.5 49.4H32V52.4H36.5V49.4ZM40.4 41.7H37.4V50.9H40.4V41.7ZM38.9 39.8H46.8V36.8H38.9V39.8ZM45.1 35.6V32.6H42.1V35.6H45.1ZM42.9 47.8H51.2V44.8H42.9V47.8ZM37.3 66.6H39.4V63.6H37.3V66.6ZM47.4 26.9V41.7H50.4V26.9H47.4ZM55.9 27.3H52.5V30.3H55.9V27.3ZM59.5 50.9V28.8H56.5V50.9H59.5ZM52 38.6H52.7V47.8H55.7V35.6H52V38.6ZM55.7 34.1V32.6H52.7V34.1H55.7ZM53.1 49.4H43.6V52.4H53.1V49.4ZM63 31.2H60V41.1H63V31.2ZM70.6 25.4H60.1V28.4H70.6V25.4ZM65.3 31.1V34.1H67.7V31.1H65.3ZM70.6 35.6H65.3V38.6H70.6V35.6ZM67.4 40.1V41.4H64.5V44.4H70.4V40.1H67.4ZM47.4 68.7H48.5C48.5 67 48.7 65.3 49.2 63.7H47.4V68.7ZM45.1 56.8V54.6H42.1V59.8H50.7C51.2 58.7 51.8 57.7 52.6 56.8H45.1ZM65.7 47.8H70.6V44.8H62.7V49.6C63.7 49.3 64.7 49.1 65.7 49V47.8ZM56 53.1H52.4V56.1H53C53.9 55 54.9 54 56 53.1ZM84.6 68.7C84.6 77.6 77.4 84.8 68.5 84.8C59.6 84.8 52.4 77.6 52.4 68.7C52.4 59.8 59.6 52.6 68.5 52.6C77.4 52.6 84.6 59.8 84.6 68.7ZM81.6 68.7C81.6 61.5 75.7 55.6 68.5 55.6C61.3 55.6 55.4 61.5 55.4 68.7C55.4 75.9 61.3 81.8 68.5 81.8C75.7 81.8 81.6 75.9 81.6 68.7ZM69.6 60.2C69.6 60.1 69.5 60.1 69.6 60.2C69.3 59.9 69 59.8 68.7 59.8C68.6 59.8 68.5 59.8 68.4 59.8C68 59.8 67.7 60 67.4 60.2L62.4 65.2C62.1 65.5 62 65.9 62 66.3C62 66.7 62.1 67.1 62.4 67.4C63 68 63.9 68 64.5 67.4L66.9 65V76.4C66.9 77.2 67.6 77.9 68.4 77.9C69.2 77.9 70 77 70 76.2V64.8L72.4 67.2C73 67.8 73.9 67.8 74.5 67.2C75.1 66.6 75.1 65.7 74.5 65.1L69.6 60.2Z"
                                fill="white" />
                        </svg>
                        Choose Qr image File
                    </button>
                    <input type="file" name="file-upload" id="qrInput" x-ref="qrFile" @change="()=>showDecodeBtn =true"
                        class="custom-file-input hidden" accept="image/*">
                </div>
                <div class="">
                    <label for="mainPassword" class="field-label">ENTER MASTER PASSWORD</label>
                    <input autocomplete="off" class="w-input" maxlength="256" name="mainPassword"
                        placeholder="Please enter qr password" type="text" x-model="mainPassword" required>
                    <button @click="()=>{ decodeQRCode($refs.qrFile); }" :style="!showDecodeBtn && {display:'none'}"
                        class=" border-btn gen-qr w-button">Decode QR Code</button>
                    <div class="w-full h-10">

                        <p x-show="qrDecreptionError" class="mt-2">Invalid password or file</p>
                    </div>
                </div>
                <!-- <div type="file"><button @click="()=>decodeQRCode($refs.qrFile)" class="btn w-button">Decode QR
                        Code</button></div> -->
            </div>
            <div x-ref="detailsForm" x-show="showForm" class="flex flex-col lg:flex-row gap-10 min-h-screen">

                <div class="w-layout-vflex qr-gen-input">
                    <div class="w-layout-hflex flex-block-8">
                        <div class="text-block">passwords or data</div><button @click="addInputGroup"
                            class="text-[20px] mb-2">+</button>
                    </div>
                    <div class="w-layout-vflex left-side">
                        <div class="form-block w-form">
                            <div id="passwordForm" class="form">
                                <div id="inputGroups" class="w-layout-vflex passwords-section ">
                                    <template x-for="(inputGroup, index) in inputGroups" :key="index">
                                        <div class="input-group">
                                            <div class="w-full flex justify-between">

                                                <label for="name" class="field-label my-auto">Title</label>
                                                <button @click="()=>inputGroups.pop(index)"
                                                    class="text-4xl mb-2">-</button>
                                            </div>
                                            <input autocomplete="off" class="name w-input" maxlength="256" name="name"
                                                data-name="Name"
                                                placeholder="Enter data title could be anything like my server password"
                                                type="text" x-model="inputGroup.name" required>
                                            <label for="field-3" class="password-label">Password Or Data</label>
                                            <textarea required placeholder="Password Or data you want to encrypt "
                                                maxlength="5000" name="field-2" data-name="Field 2"
                                                class="passwords w-input" x-model="inputGroup.passwords"
                                                @input="updateStrengthMeter($event, index)"></textarea>
                                            <div class="strength-text" x-text="getStrengthText(strengths[index])"></div>
                                            <div class="flex flex-row justify-between">
                                                <div class="h-2 w-[24.5%]"
                                                    :style="{borderBottom: strengths[index] >= 1 ? '2px solid white' : '2px solid transparent'}">
                                                </div>
                                                <div class="h-2 w-[24.5%]"
                                                    :style="{borderBottom: strengths[index] >= 2 ? '2px solid white' : '2px solid transparent'}">
                                                </div>
                                                <div class="h-2 w-[24.5%]"
                                                    :style="{borderBottom: strengths[index] >= 3 ? '2px solid white' : '2px solid transparent'}">
                                                </div>
                                                <div class="h-2 w-[24.5%]"
                                                    :style="{borderBottom: strengths[index] >= 4 ? '2px solid white' : '2px solid transparent'}">
                                                </div>
                                            </div>
                                            <button @click.prevent="generatePassword(index)"
                                                class="border-btn generate-password w-button">GENERATE PASSWORD</button>
                                        </div>
                                    </template>
                                </div>
                                <div class="w-layout-vflex master-password-section">
                                    <label for="mainPassword" class="field-label">SET NEW MASTER PASSWORD</label>
                                    <input autocomplete="off" class="w-input" maxlength="256" name="mainPassword"
                                        placeholder="Select complex data as master passwords" type="text"
                                        x-model="newMainPassword" required>
                                    <button @click="generateQRCodes" class="border-btn gen-qr w-button">EDIT QR</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="w-layout-vflex w-full">
                    <div id="qrcode" class="mb-[-20px]" x-ref="qrcode"></div>
                    <div class="progress" x-show="isGenerating">
                        <div>Generating QR Code...</div>
                    </div>
                </div>

            </div>
        </section>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.5/dist/cdn.min.js" defer></script>
    <script>
        function ui() {
            return {
                decodeMode: false,
            }
        }
    </script>
    <script>
        function displayQRCode(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const qrImage = document.createElement('img');
                    qrImage.src = e.target.result;
                    qrImage.style.width = '200px'; // Set desired width
                    qrImage.style.height = '200px'; // Set desired height

                    const qrDisplay = document.getElementById('qrDisplay');
                    qrDisplay.innerHTML = ''; // Clear previous content
                    qrDisplay.appendChild(qrImage);
                };
                reader.readAsDataURL(file);
            }
        }
        function passwordManager(data) {
            return {
                inputGroups: [{ name: '', passwords: '' }],
                mainPassword: '',
                newMainPassword: undefined,
                isGenerating: false,
                decryptedData: '',
                strengths: [0],
                showDecodeBtn: false,
                qrDecreptionError: false,
                showForm:false,
                setData(data) {
                    console.log(data)
                    this
                },
                addInputGroup() {
                    this.inputGroups.push({ name: '', passwords: '' });
                    this.strengths.push(0);
                },
                getStrengthText(strength) {
                    console.log(strength)
                    switch (strength) {
                        case 1:
                            return 'Weak';
                        case 2:
                            return 'Fair';
                        case 3:
                            return 'Good';
                        case 4:
                            return 'Strong';
                        default:
                            return '';
                    }
                },
                async generateQRCodes() {
                    this.isGenerating = true;

                    const allData = this.inputGroups.map(inputGroup => ({
                        name: inputGroup.name,
                        passwords: inputGroup.passwords
                    }));

                    const dataToEncrypt = JSON.stringify(allData);

                    try {
                        password = (this.newMainPassword ?? this.mainPassword);
                        const encryptedData = CryptoJS.AES.encrypt(dataToEncrypt, password).toString();
                        const qrCanvas = document.createElement('canvas');
                        qrCanvas.style.marginBottom = '20px';
                        this.$refs.qrcode.innerHTML = '';
                        this.$refs.qrcode.appendChild(qrCanvas);
                        this.$refs.qrcode.scrollIntoView()

                        await QRCode.toCanvas(qrCanvas, encryptedData, {
                            scale: 15,
                            color: {
                                dark: '#FFFFFF', // Lines
                                light: '#0a0a0a' // Background
                            }
                        }); this.createDownloadLink(qrCanvas, 'all_passwords_qr');
                        this.isGenerating = false;
                    } catch (error) {
                        console.error('Encryption error:', error);
                        this.isGenerating = false;
                    }
                },
                createDownloadLink(canvas, name) {
                    const downloadLink = document.createElement('a');
                    downloadLink.classList.add("download-link", "border-btn")
                    downloadLink.innerText = 'Download QR Code';
                    downloadLink.download = `${name}.png`;
                    downloadLink.href = canvas.toDataURL('image/png');
                    downloadLink.style.display = 'block';
                    downloadLink.style.marginTop = '10px';

                    this.$refs.qrcode.appendChild(downloadLink);
                },
                decodeQRCode(target) {
                    const fileInput = target;
                    if (!fileInput.files.length) {
                        alert('Please select a QR code image to decode.');
                        return;
                    }

                    const file = fileInput.files[0];
                    const reader = new FileReader();

                    reader.onload = () => {
                        const image = new Image();
                        image.src = reader.result;

                        image.onload = () => {
                            const canvas = document.createElement('canvas');
                            const context = canvas.getContext('2d');
                            canvas.width = image.width;
                            canvas.height = image.height;
                            context.drawImage(image, 0, 0, canvas.width, canvas.height);

                            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                            const code = jsQR(imageData.data, imageData.width, imageData.height);
                            if (code) {
                                this.decryptData(code.data);

                            } else {
                                alert('No QR code found in the image.');
                            }
                        };
                    };

                    reader.readAsDataURL(file);
                },
                decryptData(encryptedData) {
                    try {
                        const bytes = CryptoJS.AES.decrypt(encryptedData, this.mainPassword);
                        const decryptedData = bytes.toString(CryptoJS.enc.Utf8);
                        const parsedData = JSON.parse(decryptedData);
                        console.log(parsedData)
                        if (parsedData !== undefined) {
                            this.qrDecreptionError = false;
                            this.inputGroups = parsedData
                            this.newMainPassword = this.mainPassword;
                            this.generateQRCodes();
                            this.showForm=true;
                            console.log(this.$refs.detailsForm)
                            setTimeout(()=>{
                                this.$refs.detailsForm.scrollIntoView();
                            },1)
                        
                        }
                    } catch (error) {
                        this.qrDecreptionError = true;
                        // alert("invalid main password or qr code")
                        // console.error('Decryption error:', error);
                        this.decryptedData = 'Error decrypting data';
                    }
                },
                updateStrengthMeter(event, index) {
                    const value = event.target.value;
                    let strength = 0;
                    if (value.length >= 8) strength++;
                    if (/[A-Z]/.test(value)) strength++;
                    if (/[0-9]/.test(value)) strength++;
                    if (/[^A-Za-z0-9]/.test(value)) strength++;
                    this.strengths[index] = strength;
                },
                generatePassword(index) {
                    const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~`|}{[]:;?><,./-=';
                    let password = '';
                    for (let i = 0, n = charset.length; i < 12; ++i) {
                        password += charset.charAt(Math.floor(Math.random() * n));
                    }
                    this.inputGroups[index].passwords = password;
                    this.updateStrengthMeter({ target: { value: password } }, index);
                },

            }
        }
    </script>
</body>

</html>